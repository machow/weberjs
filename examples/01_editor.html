<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>

  <link href="css/jsoneditor.css" rel="stylesheet" type="text/css">
  <script src="js/jsoneditor.min.js"></script>
  <script src="js/paper-full.js"></script>

  <style type="text/css">
    #jsoneditor {
      width: 400px;
      height: 500px;
    }
  </style>
</head>
<body>
<div id="container">
  <p>
    <button id="run">Run</button>
  </p>
  <div id="jsoneditor" style="float: left"></div>
  <div id="canvas-container" style="border:solid;float:left;">
    <canvas id="myCanvas" style="border:2px; width:500px; height:500px;"></canvas>
  </div>
</div>
  

<script type="text/javascript" src="../js/weber.js"></script>
<script>
  var demoStream = [
    {
      type: "add",
      item: "PointText",
      options: {
        point: [250, 250],
        justification: 'center',
        content: 'demo stimuli',
        strokeColor: 'black',
        name: "instructionsText"
      },
      time: 500
    },
    {
      type: "update",
      name: "instructionsText",
      method: "remove",
      time: 1500
    },
    {
      type: "add",
      item: "Path.Circle",
      options: {
        center: [300, 200],
        radius: 50,
        strokeColor: 'black'
      },
      time: 2000
    },
    {
      type: "add",
      item: "Path.Star",
      options: {
        center: [150, 250],
        points: 3,
        radius1: 50,
        radius2: 50,
        strokeColor: 'red'
      },
      time: 2500
    },
    {
      type: "add",
      item: "Path.Rectangle",
      options: {
        from: [310, 340],
        to: [420, 440],
        strokeColor: 'blue'
      },
      time: 3000
    },
    {
      type: "removeAll",
      time: 4000
    }
  ]

  var container = document.getElementById('jsoneditor')
  var editor = new JSONEditor(container); 
  editor.set(demoStream)

  var recorder = new Recorder()

  document.getElementById('run').onclick = function(){
    console.log('running')
    recorder.addStream(editor.get())
  }

  paper.view.onFrame = function(event){
    recorder.runStream(performance.now())
  }
</script>
</body>
</html>
